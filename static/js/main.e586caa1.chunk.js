(this.webpackJsonpbrailler=this.webpackJsonpbrailler||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n.n(c),i=n(5),s=n.n(i),l=(n(12),n(13),n(3)),o=n(2),u=(n(14),n(15),n(6)),j=n.n(u),h=window.Marvin,d=window.MarvinImage,b={twitch:[60,64],youtube:[12,24],custom:[]},f=function(e){var t=e.settings,n=e.setSettings;return Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"file",children:"Picture file: "}),Object(r.jsx)("input",{id:"file",type:"file",accept:"image/*",onChange:function(e){return function(e){var r=e.target.files;0!==r.length&&n(Object(o.a)(Object(o.a)({},t),{},{path:r[0]}))}(e)}})]})},g=function(e){var t=e.settings,n=e.setSettings,a=e.setRawData,i=Object(c.useState)(null),s=Object(l.a)(i,2),u=s[0],f=s[1],g=Object(c.useRef)(null),O=Object(c.useCallback)((function(e){g.current=e}),[]),v=t.previewCanvasRef,p=Object(c.useState)({}),x=Object(l.a)(p,2),w=x[0],m=x[1];Object(c.useEffect)((function(){m({aspect:t.aspect})}),[t.aspect]);var C=Object(c.useState)(null),S=Object(l.a)(C,2),y=S[0],D=S[1],F=Object(c.useState)(Object.keys(b)[0]),R=Object(l.a)(F,2),k=R[0],E=R[1],I=function(e,t){return parseInt(e-e%t)};if(Object(c.useEffect)((function(){if(y&&v.current&&g.current&&t.configured&&y.width&&y.height){var e=g.current,n=v.current,r=y;if(r.width&&r.height){!function(e,t,n){var r=e.naturalWidth/e.width,c=e.naturalHeight/e.height,a=t.getContext("2d"),i=window.devicePixelRatio;t.width=n.width*i,t.height=n.height*i,a.setTransform(i,0,0,i,0,0),a.imageSmoothingQuality="high",a.drawImage(e,n.x*r,n.y*c,n.width*r,n.height*c,0,0,n.width,n.height)}(e,n,r);var c=new d,i=new d,s=n.toDataURL();c.load(s,(function(){var e,r;i=c.clone(),h.grayScale(c,i),t.detectEdges&&(c=i.clone(),h.prewitt(c,i)),t.invertColors&&(c=i.clone(),h.invertColors(c,i)),c=i.clone(),h.thresholding(c,i,Math.floor(2.55*t.threshold)),i.draw(n),"custom"===k?(e=I(y.width,2),r=I(y.height,4)):(e=b[k][0],r=b[k][1]);var s=new d;h.scale(i,s,e,r),a(s.imageData)}))}}}),[y,v,t]),Object(c.useEffect)((function(){if(t.path){var e=new FileReader;e.addEventListener("load",(function(){return f(e.result)})),e.readAsDataURL(t.path)}}),[t.path]),!t.path)return null;var L=function(e){var r=e.target.value;E(r);var c=b[r],a=0!==c.length?c[0]/c[1]:null;n(Object(o.a)(Object(o.a)({},t),{},{aspect:a,configured:!t.configured})),D({})},N=[];for(var P in b)N.push(Object(r.jsxs)("label",{htmlFor:P,children:[Object(r.jsx)("input",{id:P,type:"radio",value:P,name:"type",defaultChecked:P===Object.keys(b)[0],onChange:function(e){return L(e)}})," ",P," "]},"".concat(P,"_label")));return Object(r.jsxs)("form",{id:"settings",children:[Object(r.jsxs)("fieldset",{id:"settings-fieldset",children:[Object(r.jsx)("legend",{children:"Settings"}),N,Object(r.jsx)("br",{}),Object(r.jsx)("label",{htmlFor:"threshold",children:"Threshold [1-99]: "}),Object(r.jsx)("input",{id:"threshold",type:"number",name:"threshold",min:"1",max:"99",defaultValue:t.threshold,onChange:function(e){return function(e){var r=parseInt(e.target.value);n(Object(o.a)(Object(o.a)({},t),{},{threshold:r}))}(e)}},"threshold"),Object(r.jsxs)("label",{htmlFor:"edge",children:[Object(r.jsx)("input",{id:"edge",type:"checkbox",name:"edge",defaultValue:t.detectEdges,onChange:function(e){return function(e){var r=e.target.checked;n(Object(o.a)(Object(o.a)({},t),{},{detectEdges:r}))}(e)}},"edge"),"Detect edges"]}),Object(r.jsxs)("label",{htmlFor:"invert",children:[Object(r.jsx)("input",{id:"invert",type:"checkbox",name:"invert",defaultValue:t.invertColors,onChange:function(e){return function(e){var r=e.target.checked;n(Object(o.a)(Object(o.a)({},t),{},{invertColors:r}))}(e)}},"invert"),"Invert colors"]})]}),Object(r.jsxs)("div",{className:"crop",children:[Object(r.jsx)("p",{children:"Crop"}),Object(r.jsx)(j.a,{src:u,crop:w,onImageLoaded:O,onChange:function(e){return m(e)},onComplete:function(e){return D(e)},onDragEnd:function(){t.configured||n(Object(o.a)(Object(o.a)({},t),{},{configured:!0}))}})]})]})},O=function(e){var t=e.settings;return t.configured?Object(r.jsxs)("div",{className:"preview",children:[Object(r.jsx)("p",{children:"Preview"}),Object(r.jsx)("canvas",{ref:t.previewCanvasRef})]}):null},v=function(e){var t=e.rawData;if(!t)return null;for(var n=t.width,c=t.height,a=function(e,r){var c=r*(4*n)+4*e;return t.data[c]?0:1},i=function(e,t){var n=1*a(e,t)+2*a(e,t+1)+4*a(e,t+2)+8*a(e+1,t)+16*a(e+1,t+1)+32*a(e+1,t+2)+64*a(e,t+3)+128*a(e+1,t+3)+10240;return String.fromCharCode(n)},s=[],l=0;l<=c-1;l+=4){for(var o="",u=0;u<=n-1;u+=2)o+=i(u,l);s.push(Object(r.jsxs)("pre",{children:[o,Object(r.jsx)("br",{})]},l))}return Object(r.jsx)("div",{className:"result",children:Object(r.jsx)("pre",{children:s})})},p=function(){var e=Object.values(b)[0];e=e[0]/e[1];var t=Object(c.useRef)(null),n=Object(c.useState)({path:null,aspect:e,threshold:50,detectEdges:!1,invertColors:!1,previewCanvasRef:t,configured:!1}),a=Object(l.a)(n,2),i=a[0],s=a[1],o=Object(c.useState)(null),u=Object(l.a)(o,2),j=u[0],h=u[1];return Object(r.jsxs)("div",{className:"Controls",children:[Object(r.jsx)(f,{settings:i,setSettings:s}),Object(r.jsx)(g,{settings:i,setSettings:s,setRawData:h}),Object(r.jsx)(O,{settings:i}),Object(r.jsx)(v,{rawData:j})]})},x=function(){return Object(r.jsx)("header",{children:Object(r.jsx)("h3",{children:"Generate ASCII Art from a picture using Braille patterns"})})},w=function(){var e=(new Date).getFullYear();return Object(r.jsxs)("footer",{children:["\xa9 Copyright ",e," ",Object(r.jsx)("strong",{children:"Not a Designer "}),"LLC."]})};var m=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(x,{}),Object(r.jsx)(p,{}),Object(r.jsx)(w,{})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(m,{})}),document.getElementById("root")),C()}},[[16,1,2]]]);
//# sourceMappingURL=main.e586caa1.chunk.js.map